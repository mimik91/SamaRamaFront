<div class="summary-container">
  <div *ngIf="loading" class="loading-message">
    <div class="loading-spinner"></div>
    <p>{{ t('order_summary.loading') }}</p>
  </div>

  <div *ngIf="error && !loading" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error">
    <h2 [innerHTML]="t('order_summary.page_title')"></h2>
    <p>{{ t('order_summary.description') }}</p>
    <p class="countdown-text" [innerHTML]="t('order_summary.countdown', { seconds: countdown })"></p>

    <div *ngIf="orderSummary && orderSummary.length > 0; else noSummary">
      <h3>{{ t('order_summary.summary_title') }}</h3>
      <div *ngFor="let order of orderSummary; let i = index" class="order-card">
        <h4 *ngIf="orderSummary.length > 1">{{ t('order_summary.order_number') }} {{ i + 1 }}</h4>
        
        <div class="order-detail">
          <span class="detail-label">{{ t('order_summary.bicycle_count') }}</span>
          <span class="detail-value">{{ getTotalBicycles(order) }}</span>
        </div>

        <div class="order-detail" *ngIf="order.bicycles && order.bicycles.length > 0">
          <span class="detail-label">{{ t('order_summary.bicycles_label') }}</span>
          <div class="bicycles-list">
            <div *ngFor="let bike of order.bicycles; let j = index" class="bicycle-item">
              <span class="bike-number">{{ j + 1 }}.</span>
              <span class="bike-info">{{ bike.brand }}{{ bike.model ? ' ' + bike.model : '' }}</span>
            </div>
          </div>
        </div>

        <div class="order-detail">
          <span class="detail-label">{{ t('order_summary.pickup_address') }}</span>
          <span class="detail-value">{{ order.pickupAddress }}</span>
        </div>

        <div class="order-detail" *ngIf="order.deliveryAddress">
          <span class="detail-label">{{ t('order_summary.delivery_address') }}</span>
          <span class="detail-value">{{ order.deliveryAddress }}</span>
        </div>

        <div class="order-detail">
          <span class="detail-label">{{ t('order_summary.pickup_date') }}</span>
          <span class="detail-value">{{ order.pickupDate }}</span>
        </div>

        <div class="order-detail" *ngIf="order.recipientEmail">
          <span class="detail-label">{{ t('order_summary.contact_email') }}</span>
          <span class="detail-value">{{ order.recipientEmail }}</span>
        </div>

        <div class="order-detail price-detail">
          <span class="detail-label">{{ t('order_summary.transport_price') }}</span>
          <span class="detail-value price-value">{{ order.transportPrice | currency:'PLN':'symbol':'1.2-2' }}</span>
        </div>
      </div>

      <div class="info-box">
        <div class="info-icon">ℹ️</div>
        <div class="info-text">
          <strong>{{ t('order_summary.payment_info_title') }}</strong>
          <p>{{ t('order_summary.payment_info_text') }}</p>
        </div>
      </div>
    </div>
    <ng-template #noSummary>
      <div class="error-message">{{ t('order_summary.no_summary') }}</div>
    </ng-template>

    <button class="home-btn" (click)="goToHomepage()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        <polyline points="9 22 9 12 15 12 15 22"/>
      </svg>
      {{ t('order_summary.home_button') }}
    </button>
  </div>
</div>