<div class="admin-panel-container">
  <!-- Loading Services State -->
  <div *ngIf="isLoadingServices" class="loading-state">
    <div class="spinner"></div>
    <p>{{ t('service_admin.loading_services') }}</p>
  </div>

  <!-- Services Error State -->
  <div *ngIf="servicesError" class="error-state">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="15" y1="9" x2="9" y2="15"></line>
      <line x1="9" y1="9" x2="15" y2="15"></line>
    </svg>
    <h2>{{ t('service_admin.error_title') }}</h2>
    <p>{{ servicesError }}</p>
    <button (click)="loadMyServices()" class="retry-btn">
      {{ t('service_admin.retry') }}
    </button>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoadingServices && !servicesError && myServices.length > 0">
    
    <!-- Service Selector (only if multiple services) -->
    <div class="service-selector" *ngIf="myServices.length > 1">
      <label for="service-select">{{ t('service_admin.select_service') }}</label>
      <select
        id="service-select"
        [value]="selectedServiceId"
        (change)="onServiceChange($event)"
        class="service-dropdown">
        <option *ngFor="let service of myServices" [value]="service.id">
          {{ service.name }}
        </option>
      </select>
    </div>

    <!-- Loading Details State -->
    <div *ngIf="isLoadingDetails" class="loading-state">
      <div class="spinner"></div>
      <p>{{ t('service_admin.loading_details') }}</p>
    </div>

    <!-- Details Error State -->
    <div *ngIf="detailsError" class="error-state">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="15" y1="9" x2="9" y2="15"></line>
        <line x1="9" y1="9" x2="15" y2="15"></line>
      </svg>
      <h2>{{ t('service_admin.error_title') }}</h2>
      <p>{{ detailsError }}</p>
      <button (click)="loadServiceDetails()" class="retry-btn">
        {{ t('service_admin.retry') }}
      </button>
    </div>

    <!-- Panel Content -->
    <div *ngIf="!isLoadingDetails && !detailsError && serviceDetails" class="panel-content">
      
      <!-- Header -->
      <header class="panel-header">
        <button class="back-btn" (click)="goToCalendar()">
          <span class="back-icon">&#8592;</span>
          {{ t('service_admin.back_to_calendar') }}
        </button>
        <h1>{{ t('service_admin.panel_title') }}</h1>
        <p class="service-name">{{ serviceDetails.name }}</p>
      </header>

      <!-- Tabs Navigation -->
      <div class="tabs-container">
        <button
          *ngFor="let tab of tabs"
          [class.active]="isTabActive(tab.id)"
          (click)="setActiveTab(tab.id)"
          class="tab-btn">
          {{ t(tab.labelKey) }}
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        
        <!-- Basic Info Tab -->
        <app-service-admin-basic-info
          *ngIf="activeTab === 'basic'"
          [serviceDetails]="serviceDetails"
          [serviceId]="selectedServiceId!">
        </app-service-admin-basic-info>

        <!-- Services/Coverages Tab -->
        <app-service-admin-coverages
          *ngIf="activeTab === 'services'"
          [serviceId]="selectedServiceId!">
        </app-service-admin-coverages>

        <!-- Pricelist Tab (ZMIANA: uÅ¼ywamy wrapper component) -->
        <app-service-admin-pricelist-wrapper
          *ngIf="activeTab === 'pricelist'"
          [serviceId]="selectedServiceId!">
        </app-service-admin-pricelist-wrapper>

        <!-- Opening Hours Tab -->
        <app-service-admin-opening-hours
          *ngIf="activeTab === 'hours'"
          [serviceId]="selectedServiceId!">
        </app-service-admin-opening-hours>

        <!-- Images Tab -->
        <app-service-admin-images
          *ngIf="activeTab === 'images'"
          [serviceId]="selectedServiceId!">
        </app-service-admin-images>
        
      </div>
    </div>
  </div>
</div>