<div class="hero-section">
  <img src="../../assets/images/home-image.jpg" alt="CycloPick Home Image" class="hero-image" onerror="this.src='https://placehold.co/1600x500/57BCD8/FFFFFF?text=CycloPick+Serwis+Rowerowy'">
</div>

<!-- Główna treść strony -->
<div class="home-container">
  <div class="header">
    <h1>
      <app-cyclopick-logo [height]="'240px'" [textSize]="'2rem'" [textColor]="'#2c3e50'"></app-cyclopick-logo>
      - Serwis rowerowy
    </h1>
    <p class="subtitle">Dodaj informacje o swoim rowerze i zamów serwis</p>
  </div>

  <!-- Komunikat o sukcesie po zapisaniu formularza -->
  <div *ngIf="formSubmitted" class="success-message">
    <div class="success-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
    </div>
    <div class="success-content">
      <h3>Zamówienie wysłane pomyślnie!</h3>
      <p>Twoje zamówienie zostało przyjęte. Wkrótce skontaktujemy się z Tobą w sprawie szczegółów.</p>
      <div class="success-actions">
        <button type="button" class="reset-btn" (click)="resetForm()">Nowe zamówienie</button>
        <button type="button" class="login-btn" (click)="navigateTo('/login')">Przejdź do logowania</button>
      </div>
    </div>
  </div>

  <div class="form-container" *ngIf="!formSubmitted">
    <form [formGroup]="bikeForm" (ngSubmit)="onSubmit()">
      <div formArrayName="bikes">
        <div *ngFor="let bikeGroup of bikesArray.controls; let i = index" class="bike-form-group">
          <div [formGroupName]="i" class="bike-form-content">
            <div class="form-header">
              <h2>Rower #{{ i + 1 }}</h2>
              <button 
                *ngIf="bikesArray.length > 1" 
                type="button" 
                class="remove-btn" 
                (click)="removeBike(i)"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>

            <div class="form-grid">
              <div class="form-group">
                <label for="brand-{{i}}">Marka *</label>
                <select 
                  id="brand-{{i}}" 
                  formControlName="brand" 
                  [class.is-invalid]="isFieldInvalid(i, 'brand')"
                  [attr.disabled]="loadingBrands ? '' : null"
                >
                  <option value="" disabled>-- Wybierz markę --</option>
                  <option *ngIf="loadingBrands" value="" disabled>Ładowanie...</option>
                  <option *ngFor="let brand of brands" [value]="brand">{{ brand }}</option>
                  <option value="Inna">Inna marka</option>
                </select>
                <div *ngIf="isFieldInvalid(i, 'brand')" class="error-message">
                  Marka jest wymagana
                </div>
              </div>

              <div class="form-group">
                <label for="model-{{i}}">Model</label>
                <input 
                  type="text" 
                  id="model-{{i}}" 
                  formControlName="model"
                  placeholder="Wpisz model roweru"
                >
              </div>
            </div>

            <div class="form-group">
              <label for="additionalInfo-{{i}}">Dodatkowe informacje</label>
              <textarea 
                id="additionalInfo-{{i}}" 
                formControlName="additionalInfo" 
                rows="2"
                placeholder="Opisz problem lub podaj inne informacje o rowerze"
              ></textarea>
            </div>
          </div>
        </div>
      </div>

      <div class="form-actions">
          <button type="button" class="add-btn" (click)="addBike()" [disabled]="!canAddMoreBikes()">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              Dodaj kolejny rower
          </button>
        
        <div class="action-buttons">
          <button type="button" class="submit-btn" (click)="goToServiceOrder()">
            Zamów serwis
          </button>
          <button type="button" class="login-btn" (click)="navigateTo('/login')">
            Zaloguj się
          </button>
        </div>
      </div>
    </form>
  </div>
  
  <!-- Sekcja dla serwisów rowerowych -->
  <div class="service-promo-box">
    <h2>Jesteś serwisem rowerowym?</h2>
    <p>Dołącz do naszej platformy i docieraj do klientów w Twojej okolicy. Oferujemy proste zarządzanie zleceniami i szybkie płatności.</p>
    <button type="button" class="service-promo-btn" (click)="navigateTo('/register-service')">Zarejestruj swój serwis</button>
  </div>

  <!-- Menu ikon na dole strony -->
  <div class="bottom-menu">
    <div class="menu-items">
      <!-- Jak działamy -->
      <div class="menu-item" >
        <div class="menu-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 12m-10 0a10 10 0 1 0 20 0a10 10 0 1 0 -20 0"></path>
            <path d="M12 16v-4"></path>
            <path d="M12 8h.01"></path>
          </svg>
        </div>
        <h3>Jak działamy</h3>
      </div>
      
      <!-- Co zyskujesz -->
      <div class="menu-item" >
        <div class="menu-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 12l2 2l4 -4"></path>
            <path d="M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3"></path>
          </svg>
        </div>
        <h3>Co zyskujesz</h3>
      </div>
      
      <!-- Zamów -->
      <div class="menu-item">
        <div class="menu-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 6h3a1 1 0 0 1 1 1v11a2 2 0 0 1 -4 0v-13a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1v12a3 3 0 0 0 3 3h11"></path>
            <path d="M8 8l4 0"></path>
            <path d="M8 12l4 0"></path>
            <path d="M8 16l4 0"></path>
          </svg>
        </div>
        <h3>Zamów</h3>
      </div>
    </div>
  </div>

  <!-- Sekcje treści, które będą widoczne po przewinięciu -->
  <section id="how-it-works" class="content-section">
    <h2>Jak działamy</h2>
    <div class="process-steps">
      <div class="step">
        <div class="step-number">1</div>
        <div class="step-content">
          <h3>Przyjmujemy zamówienia</h3>
          <p>Szybki i prosty proces zamówienia online</p>
        </div>
      </div>
      
      <div class="step">
        <div class="step-number">2</div>
        <div class="step-content">
          <h3>Odbieramy rower od klienta</h3>
          <p>Bezpośrednio spod Twoich drzwi, w dogodnym terminie</p>
        </div>
      </div>
      
      <div class="step">
        <div class="step-number">3</div>
        <div class="step-content">
          <h3>Zawozimy rower do serwisu</h3>
          <p>Bezpieczny transport do naszego profesjonalnego serwisu</p>
        </div>
      </div>
      
      <div class="step">
        <div class="step-number">4</div>
        <div class="step-content">
          <h3>Serwis dokonuje przeglądu roweru</h3>
          <p>Kompleksowa diagnostyka przez doświadczonych mechaników</p>
        </div>
      </div>
      
      <div class="step">
        <div class="step-number">5</div>
        <div class="step-content">
          <h3>Wykonujemy pełen serwis</h3>
          <ul class="service-list">
            <li>Regulacja przerzutek i hamulców</li>
            <li>Smarowanie łańcucha</li>
            <li>Sprawdzenie opon, linek i pancerzy</li>
            <li>Kasowanie luzów</li>
            <li>Wychwycenie ewentualnych napraw</li>
          </ul>
        </div>
      </div>
      
      <div class="step">
        <div class="step-number">6</div>
        <div class="step-content">
          <h3>Przywozimy rower z powrotem</h3>
          <p>Dostarczamy Twój rower pod same drzwi, gotowy do jazdy</p>
        </div>
      </div>
    </div>
  </section>

  <section id="benefits" class="content-section">
    <h2>Co zyskujesz</h2>
    <div class="benefits">
      <div class="benefit">
        <div class="benefit-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <h3>Express 24h</h3>
        <p>Zawsze szybki serwis w 24h, bez dodatkowych opłat (gdzie indziej dopłacisz nawet 30%)</p>
      </div>
      
      <div class="benefit">
        <div class="benefit-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
          </svg>
        </div>
        <h3>Profesjonalny serwis</h3>
        <p>Naprawiamy rowery w stacjonarnym serwisie z dostępem do wszystkich profesjonalnych narzędzi</p>
      </div>
      
      <div class="benefit">
        <div class="benefit-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
            <line x1="12" y1="22.08" x2="12" y2="12"></line>
          </svg>
        </div>
        <h3>Pełna wygoda</h3>
        <p>Zabieramy i przywozimy rower, nie potrzebujesz miejsca na naprawę ani nie musisz nadzorować procesu</p>
      </div>
    </div>
  </section>

  <section id="order-form" class="content-section">
    <h2>Zamów serwis</h2>
    <p class="section-subtitle">Wypełnij formularz poniżej, aby zamówić odbiór i serwis Twojego roweru</p>
    
    <!-- Referencja do istniejącego formularza -->
    <div class="form-container" *ngIf="!formSubmitted">
      <form [formGroup]="bikeForm" (ngSubmit)="onSubmit()">
        <div class="action-buttons">
          <button type="button" class="submit-btn" (click)="goToServiceOrder()">
            Zamów serwis teraz
          </button>
        </div>
      </form>
    </div>
  </section>
</div>