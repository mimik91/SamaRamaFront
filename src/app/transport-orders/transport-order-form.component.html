<!-- src/app/transport-orders/transport-order-form.component.html -->
<div class="transport-order-container">
  <h1>{{ t('transport_order.page_title') }}</h1>
  
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-message">
    <div class="loading-spinner"></div>
    <p>{{ t('transport_order.loading') }}</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-message">
    {{ error }}
  </div>

  <!-- Transport Not Available State (serwis za daleko) -->
  <div *ngIf="transportNotAvailable && !loading" class="transport-unavailable-container">
    <div class="unavailable-content">
      <img
        src="assets/images/pictures/404.webp"
        [alt]="t('transport_order.unavailable.too_far_title')"
        class="unavailable-image"
      >
      <div class="unavailable-text">
        <h2>{{ t('transport_order.unavailable.too_far_title') }}</h2>
        <p>{{ t('transport_order.unavailable.too_far_message') }}</p>
        <div class="service-info-mini" *ngIf="selectedServiceInfo.name">
          <span class="service-name">{{ selectedServiceInfo.name }}</span>
          <span class="service-address">{{ selectedServiceInfo.address }}</span>
        </div>
        <button class="back-to-map-btn" (click)="goBack()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"/>
          </svg>
          {{ t('transport_order.unavailable.back_to_map') }}
        </button>
      </div>
    </div>
  </div>

  <!-- Transport Coming Soon State (Krak√≥w - wkr√≥tce dostƒôpny) -->
  <div *ngIf="transportComingSoon && !loading" class="transport-coming-soon-container">
    <div class="coming-soon-content">
      <img
        src="assets/images/pictures/soon.webp"
        [alt]="t('transport_order.unavailable.coming_soon_title')"
        class="coming-soon-image"
      >
      <div class="coming-soon-text">
        <h2>{{ t('transport_order.unavailable.coming_soon_title') }}</h2>
        <p>{{ t('transport_order.unavailable.coming_soon_message') }}</p>
        <div class="service-info-mini" *ngIf="selectedServiceInfo.name">
          <span class="service-name">{{ selectedServiceInfo.name }}</span>
          <span class="service-address">{{ selectedServiceInfo.address }}</span>
        </div>
        <button class="back-to-map-btn" (click)="goBack()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"/>
          </svg>
          {{ t('transport_order.unavailable.back_to_map') }}
        </button>
      </div>
    </div>
  </div>

  <!-- Steps Progress -->
  <div class="steps-container" *ngIf="!loading && !error && !transportNotAvailable && !transportComingSoon">
    <div 
      *ngFor="let step of [1, 2, 3]; let i = index" 
      class="step"
      [class.active]="isStepActive(step)"
      [class.completed]="isStepCompleted(step)"
      [class.accessible]="isStepAccessible(step)"
      (click)="isStepAccessible(step) ? goToStep(step) : null"
    >
      <div class="step-number">
        <span *ngIf="!isStepCompleted(step)">{{ step }}</span>
        <svg *ngIf="isStepCompleted(step)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
      </div>
      <div class="step-label">{{ getStepTitle(step) }}</div>
    </div>
    
    <!-- Step connectors -->
    <div class="step-connectors">
      <div 
        class="step-connector"
        [class.completed]="isStepCompleted(2)"
      ></div>
      <div 
        class="step-connector"
        [class.completed]="isStepCompleted(3)"
      ></div>
    </div>
  </div>

  <!-- Service Info Card -->
  <div class="service-info-card-enhanced" *ngIf="selectedServiceInfo.name && !loading && !error && !transportNotAvailable && !transportComingSoon">
    <div class="service-header">
      <div class="service-icon">
        <img
          *ngIf="selectedServiceInfo.logoUrl"
          [src]="selectedServiceInfo.logoUrl"
          [alt]="selectedServiceInfo.name"
          class="service-logo-img"
        >
        <img
          *ngIf="!selectedServiceInfo.logoUrl"
          src="assets/images/cyclopick-logo.svg"
          alt="CycloPick"
          class="service-logo-img cyclopick-fallback"
        >
      </div>
      <div class="service-main-info">
        <h2 class="service-title">{{ selectedServiceInfo.name }}</h2>
        <p class="service-subtitle">{{ t('transport_order.service_info.subtitle') }}</p>
      </div>
    </div>
  </div>

  <!-- Main Form Content -->
  <div *ngIf="!loading && !error && !transportNotAvailable && !transportComingSoon" class="step-content">
    
    <!-- KROK 1: Dane rower√≥w -->
    <div *ngIf="currentStep === 1" class="form-section">
      <div class="step-header">
        <h2>{{ getStepTitle(1) }}</h2>
        <p class="step-description">{{ getStepDescription(1) }}</p>
        <div class="service-reminder" *ngIf="selectedServiceInfo.name">
          <strong>{{ t('transport_order.service_info.transport_to') }}</strong> {{ selectedServiceInfo.name }}
        </div>
      </div>

      <!-- Ostrze≈ºenie o rowerach karbonowych -->
      <div class="carbon-bike-warning">
        <div class="warning-content">
          <div class="warning-icon">‚ö†Ô∏è</div>
          <div class="warning-text">
            <h4>{{ t('transport_order.carbon_warning.title') }}</h4>
            <p>{{ t('transport_order.carbon_warning.message') }}</p>
          </div>
        </div>
      </div>

      <form [formGroup]="bicyclesForm">
        <div formArrayName="bicycles">
          <div 
            *ngFor="let bicycleControl of bicyclesArray.controls; let i = index" 
            [formGroupName]="i" 
            class="bicycle-form-card"
          >
            <div class="bicycle-card-header">
              <h4>{{ t('transport_order.bicycle_form.bicycle_number') }} {{ i + 1 }}</h4>
              <button 
                type="button" 
                class="remove-bicycle-btn" 
                (click)="removeBicycleFromForm(i)"
                *ngIf="bicyclesArray.length > 1"
                [title]="t('transport_order.bicycle_form.remove_bicycle')"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label [for]="'brand-' + i">{{ t('transport_order.bicycle_form.brand_label') }} *</label>
                <select 
                  [id]="'brand-' + i"
                  formControlName="brand"
                  [class.is-invalid]="isBicycleFieldInvalid(i, 'brand')"
                  [attr.disabled]="loadingBrands ? '' : null"
                >
                  <option value="" disabled>{{ t('transport_order.bicycle_form.brand_placeholder') }}</option>
                  <option *ngIf="loadingBrands" value="" disabled>{{ t('common.loading') }}</option>
                  <option *ngFor="let brand of brands" [value]="brand">{{ brand }}</option>
                </select>
                <div *ngIf="isBicycleFieldInvalid(i, 'brand')" class="error-message">
                  {{ t('transport_order.bicycle_form.brand_required') }}
                </div>
              </div>

              <div class="form-group">
                <label [for]="'model-' + i">{{ t('transport_order.bicycle_form.model_label') }}</label>
                <input 
                  type="text" 
                  [id]="'model-' + i"
                  formControlName="model"
                  [class.is-invalid]="isBicycleFieldInvalid(i, 'model')"
                  [placeholder]="t('transport_order.bicycle_form.model_placeholder')"
                >
                <div *ngIf="isBicycleFieldInvalid(i, 'model')" class="error-message">
                  {{ t('transport_order.bicycle_form.model_min_length') }}
                </div>
              </div>
            </div>

            <div class="form-group">
              <label [for]="'description-' + i">{{ t('transport_order.bicycle_form.description_label') }}</label>
              <textarea 
                [id]="'description-' + i"
                formControlName="description"
                rows="3"
                [placeholder]="t('transport_order.bicycle_form.description_placeholder')"
              ></textarea>
            </div>
          </div>
        </div>

        <button type="button" class="add-bicycle-btn" (click)="addBicycleToForm()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          {{ t('transport_order.bicycle_form.add_bicycle') }}
        </button>

        <!-- Selection Summary -->
        <div class="selection-summary" *ngIf="getSelectedBicyclesCount() > 0">
          <h4>{{ t('transport_order.selection_summary.title') }}</h4>
          <div class="summary-item service-destination">
            <span class="service-icon-small">
              <img
                *ngIf="selectedServiceInfo.logoUrl"
                [src]="selectedServiceInfo.logoUrl"
                [alt]="selectedServiceInfo.name"
                class="service-logo-small"
              >
              <img
                *ngIf="!selectedServiceInfo.logoUrl"
                src="assets/images/cyclopick-logo.svg"
                alt="CycloPick"
                class="service-logo-small"
              >
            </span>
            {{ t('transport_order.selection_summary.service_destination') }} <strong>{{ selectedServiceInfo.name }}</strong>
          </div>
          <div class="summary-item">
            {{ t('transport_order.selection_summary.bicycle_count') }} <strong>{{ getSelectedBicyclesCount() }}</strong>
          </div>
          <div class="summary-item">
            <span *ngIf="getEstimatedTransportCost() > 0">
              {{ t('transport_order.selection_summary.transport_cost') }} <strong>{{ getEstimatedTransportCost() }} z≈Ç</strong>
            </span>
            <span *ngIf="getEstimatedTransportCost() === 0">
              {{ t('transport_order.selection_summary.transport_cost') }} <strong>{{ t('transport_order.selection_summary.to_be_determined') }}</strong>
            </span>
          </div>
          <div class="summary-item" *ngIf="getEstimatedTransportCost() === 0">
            <small style="color: #6c757d; font-style: italic;">
              {{ t('transport_order.selection_summary.will_contact') }}
            </small>
          </div>
        </div>
      </form>
    </div>

    <!-- KROK 2: Kontakt i transport -->
    <div *ngIf="currentStep === 2" class="form-section">
      <div class="step-header">
        <h2>{{ getStepTitle(2) }}</h2>
        <p class="step-description">{{ getStepDescription(2) }}</p>
        <div class="service-reminder" *ngIf="selectedServiceInfo.name">
          <strong>{{ t('transport_order.service_info.transport_to') }}</strong> {{ selectedServiceInfo.name }}
        </div>
      </div>

      <form [formGroup]="contactAndTransportForm">
        <!-- Sekcja danych kontaktowych -->
        <div class="contact-section">
          <h3>{{ t('transport_order.contact_form.section_title') }}</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="clientEmail">{{ t('transport_order.contact_form.email_label') }} *</label>
              <input 
                type="email" 
                id="clientEmail" 
                formControlName="clientEmail"
                [class.is-invalid]="isFieldInvalid('clientEmail')"
                [placeholder]="t('transport_order.contact_form.email_placeholder')"
              >
              <div *ngIf="isFieldInvalid('clientEmail')" class="error-message">
                {{ t('transport_order.contact_form.email_invalid') }}
              </div>
            </div>
            
            <div class="form-group">
              <label for="clientPhone">{{ t('transport_order.contact_form.phone_label') }} *</label>
              <input 
                type="tel" 
                id="clientPhone" 
                formControlName="clientPhone"
                [class.is-invalid]="isFieldInvalid('clientPhone')"
                [placeholder]="t('transport_order.contact_form.phone_placeholder')"
                maxlength="9"
              >
              <div *ngIf="isFieldInvalid('clientPhone')" class="error-message">
                {{ t('transport_order.contact_form.phone_invalid') }}
              </div>
            </div>
          </div>
        </div>

        <!-- Sekcja szczeg√≥≈Ç√≥w transportu -->
        <div class="transport-section">
          <h3>{{ t('transport_order.transport_form.section_title') }}</h3>
          <div class="form-group">
            <label for="pickupDate">{{ t('transport_order.transport_form.pickup_date_label') }} *</label>
            <div class="date-info">
              {{ t('transport_order.transport_form.pickup_date_info') }}
            </div>
            <input 
              type="date" 
              id="pickupDate" 
              formControlName="pickupDate"
              [class.is-invalid]="isFieldInvalid('pickupDate')"
              [min]="minDate"
              [max]="maxDate"
            >
            <div *ngIf="isFieldInvalid('pickupDate')" class="error-message">
              <span *ngIf="contactAndTransportForm.get('pickupDate')?.hasError('required')">
                {{ t('transport_order.transport_form.pickup_date_required') }}
              </span>
              <span *ngIf="contactAndTransportForm.get('pickupDate')?.hasError('invalidDay')">
                {{ t('transport_order.transport_form.pickup_date_invalid_day') }}
              </span>
            </div>
          </div>
          
          <!-- ROZBITY ADRES -->
          <div class="address-section">
            <h4>{{ t('transport_order.transport_form.address_section_title') }} *</h4>
            
            <div class="form-row">
              <div class="form-group">
                <label for="pickupStreet">{{ t('transport_order.transport_form.street_label') }} *</label>
                <input 
                  type="text" 
                  id="pickupStreet" 
                  formControlName="pickupStreet"
                  [class.is-invalid]="isFieldInvalid('pickupStreet')"
                  [placeholder]="t('transport_order.transport_form.street_placeholder')"
                >
                <div *ngIf="isFieldInvalid('pickupStreet')" class="error-message">
                  {{ t('transport_order.transport_form.street_required') }}
                </div>
              </div>
              
              <div class="form-group">
                <label for="pickupBuildingNumber">{{ t('transport_order.transport_form.building_number_label') }} *</label>
                <input 
                  type="text" 
                  id="pickupBuildingNumber" 
                  formControlName="pickupBuildingNumber"
                  [class.is-invalid]="isFieldInvalid('pickupBuildingNumber')"
                  [placeholder]="t('transport_order.transport_form.building_number_placeholder')"
                >
                <div *ngIf="isFieldInvalid('pickupBuildingNumber')" class="error-message">
                  {{ t('transport_order.transport_form.building_number_required') }}
                </div>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="pickupCity">{{ t('transport_order.transport_form.city_label') }} *</label>
                <select 
                  id="pickupCity" 
                  formControlName="pickupCity"
                  [class.is-invalid]="isFieldInvalid('pickupCity')"
                  [attr.disabled]="loadingCities ? '' : null"
                >
                  <option value="" disabled>{{ t('transport_order.transport_form.city_placeholder') }}</option>
                  <option *ngIf="loadingCities" value="" disabled>{{ t('transport_order.transport_form.city_loading') }}</option>
                  <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
                </select>
                <div *ngIf="isFieldInvalid('pickupCity')" class="error-message">
                  {{ t('transport_order.transport_form.city_required') }}
                </div>
              </div>
              
              <div class="form-group">
                <label for="pickupPostalCode">{{ t('transport_order.transport_form.postal_code_label') }}</label>
                <input 
                  type="text" 
                  id="pickupPostalCode" 
                  formControlName="pickupPostalCode"
                  [class.is-invalid]="isFieldInvalid('pickupPostalCode')"
                  [placeholder]="t('transport_order.transport_form.postal_code_placeholder')"
                  pattern="\d{2}-\d{3}"
                >
                <div *ngIf="isFieldInvalid('pickupPostalCode')" class="error-message">
                  {{ t('transport_order.transport_form.postal_code_invalid') }}
                </div>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="additionalNotes">{{ t('transport_order.transport_form.additional_notes_label') }}</label>
            <textarea 
              id="additionalNotes" 
              formControlName="additionalNotes"
              rows="4"
              [placeholder]="t('transport_order.transport_form.additional_notes_placeholder')"
            ></textarea>
            <div class="help-text">
              {{ t('transport_order.transport_form.additional_notes_help') }}
            </div>
          </div>
        </div>
      </form>
    </div>

    <!-- KROK 3: Podsumowanie - TO BRAKOWA≈ÅO! -->
    <div *ngIf="currentStep === 3" class="form-section">
      <div class="step-header">
        <h2>{{ getStepTitle(3) }}</h2>
        <p class="step-description">{{ getStepDescription(3) }}</p>
      </div>

      <div class="order-summary">
        <h3>{{ t('transport_order.summary.page_title') }}</h3>
        
        <!-- Lista rower√≥w -->
        <div class="summary-section" *ngIf="getBicyclesData().length > 0">
          <h4>{{ t('transport_order.summary.bicycles_list') }} ({{ getSelectedBicyclesCount() }}):</h4>
          <div class="summary-bikes">
            <div *ngFor="let bicycleData of getBicyclesData(); let i = index" class="summary-bike">
              <span class="bike-index">{{ i + 1 }}.</span>
              <span class="bike-name">
                {{ bicycleData.brand }}
                <span *ngIf="bicycleData.model"> {{ bicycleData.model }}</span>
              </span>
              <div *ngIf="bicycleData.description" class="bike-description">{{ bicycleData.description }}</div>
            </div>
          </div>
        </div>
        
        <!-- Dane kontaktowe -->
        <div class="summary-section">
          <h4>{{ t('transport_order.summary.contact_data') }}</h4>
          <div class="summary-details">
            <div class="summary-row">
              <span class="label">{{ t('transport_order.summary.email') }}</span>
              <span class="value">{{ contactAndTransportForm.get('clientEmail')?.value }}</span>
            </div>
            <div class="summary-row">
              <span class="label">{{ t('transport_order.summary.phone') }}</span>
              <span class="value">{{ contactAndTransportForm.get('clientPhone')?.value }}</span>
            </div>
          </div>
        </div>
        
        <!-- Szczeg√≥≈Çy transportu -->
        <div class="summary-section">
          <h4>{{ t('transport_order.summary.transport_details') }}</h4>
          <div class="summary-details">
            <div class="summary-row">
              <span class="label">{{ t('transport_order.summary.pickup_date') }}</span>
              <span class="value">{{ contactAndTransportForm.get('pickupDate')?.value | date:'dd.MM.yyyy' }}</span>
            </div>
            <div class="summary-row">
              <span class="label">{{ t('transport_order.summary.pickup_address') }}</span>
              <span class="value">{{ getFullPickupAddress() }}</span>
            </div>
            <div class="summary-row">
              <span class="label">{{ t('transport_order.summary.target_service') }}</span>
              <span class="value">{{ selectedServiceInfo.name }}</span>
            </div>
            <div class="summary-row">
              <span class="label">{{ t('transport_order.summary.service_address') }}</span>
              <span class="value">{{ selectedServiceInfo.address }}</span>
            </div>
            <div class="summary-row" *ngIf="contactAndTransportForm.get('additionalNotes')?.value">
              <span class="label">{{ t('transport_order.summary.additional_info') }}</span>
              <span class="value">{{ contactAndTransportForm.get('additionalNotes')?.value }}</span>
            </div>
          </div>
        </div>
        
        <!-- Koszt -->
        <div class="summary-total">
          <div class="total-row">
            <span class="total-label">{{ t('transport_order.summary.transport_cost') }}</span>
            <div>
              <span class="total-price" [class.original-price]="finalTransportPrice !== null">
                {{ getEstimatedTransportCost() }} z≈Ç
              </span>
              <span *ngIf="finalTransportPrice !== null" class="total-price discounted-price">
                ‚Üí {{ finalTransportPrice }} z≈Ç
              </span>
            </div>
          </div>
          <div class="total-details">
            <span *ngIf="getEstimatedTransportCost() > 0">
              {{ t('transport_order.summary.transport_cost_details') }} {{ getSelectedBicyclesCount() }} {{ getSelectedBicyclesCount() === 1 ? t('transport_order.summary.bikes_suffix_1') : t('transport_order.summary.bikes_suffix_2_4') }}
            </span>
            <span *ngIf="getEstimatedTransportCost() === 0">{{ t('transport_order.summary.will_contact_details') }}</span>
          </div>
        </div>

        <!-- Sekcja rabatu -->
        <div class="discount-section">
          <h4>{{ t('transport_order.discount.section_title') }}</h4>
          <div class="discount-form">
            <div class="form-group">
              <input 
                type="text" 
                [formControl]="discountCouponControl"
                [placeholder]="t('transport_order.discount.coupon_placeholder')"
                [attr.aria-invalid]="isCouponInvalid"
              >
            </div>
            <button 
              type="button" 
              class="apply-coupon-btn" 
              (click)="applyDiscountCoupon()"
              [disabled]="isApplyingCoupon || !discountCouponControl.value"
            >
              <span *ngIf="!isApplyingCoupon">{{ t('transport_order.discount.apply_button') }}</span>
              <span *ngIf="isApplyingCoupon" class="loading-spinner-small"></span>
            </button>
          </div>
          <div *ngIf="couponMessage" class="coupon-message" [ngClass]="{'error': isCouponInvalid, 'success': !isCouponInvalid}">
            {{ couponMessage }}
          </div>
        </div>

        <!-- Informacja o p≈Çatno≈õci -->
        <div class="payment-info">
          <div class="payment-icon">üí≥</div>
          <div class="payment-text">
            <h4>{{ t('transport_order.payment_info.title') }}</h4>
            <p [innerHTML]="t('transport_order.payment_info.description')"></p>
          </div>
        </div>
      </div>

      <!-- Akceptacja regulaminu -->
      <div class="terms-container">
        <div class="form-check">
          <input 
            type="checkbox" 
            id="termsAccepted" 
            [formControl]="termsAcceptedControl"
            class="form-check-input"
            [class.is-invalid]="termsAcceptedControl.invalid && termsAcceptedControl.touched"
          >
          <label for="termsAccepted" class="form-check-label">
            {{ t('transport_order.terms.accept_label') }} 
            <a [href]="links.termsOfService" target="_blank" class="terms-link">{{ t('transport_order.terms.terms_link') }}</a> 
            {{ t('transport_order.terms.and') }} 
            <a [href]="links.privacyPolicy" target="_blank" class="terms-link">{{ t('transport_order.terms.privacy_link') }}</a>
          </label>
        </div>
        <div *ngIf="termsAcceptedControl.invalid && termsAcceptedControl.touched" class="error-message">
          {{ t('transport_order.terms.required') }}
        </div>
      </div>
    </div>

    <!-- Step Navigation -->
    <div class="step-actions">
      <button 
        type="button" 
        class="back-btn" 
        (click)="currentStep === 1 ? goBack() : prevStep()"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m15 18-6-6 6-6"/>
        </svg>
        {{ currentStep === 1 ? t('transport_order.navigation.back_to_map') : t('transport_order.navigation.previous_step') }}
      </button>
      
      <button 
        type="button" 
        class="next-btn" 
        *ngIf="currentStep < totalSteps"
        (click)="nextStep()"
        [disabled]="!isCurrentStepValid()"
      >
        {{ t('transport_order.navigation.next_step') }}
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m9 18 6-6-6-6"/>
        </svg>
      </button>
      
      <button 
        type="button" 
        class="submit-btn" 
        *ngIf="currentStep === totalSteps"
        (click)="onSubmit()"
        [disabled]="submitting || !isStepValid(1) || !isStepValid(2) || !termsAcceptedControl.value"
      >
        <svg *ngIf="!submitting" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 12h14"/>
          <path d="m12 5 7 7-7 7"/>
        </svg>
        <span *ngIf="submitting" class="loading-spinner"></span>
        {{ submitting ? t('transport_order.navigation.processing') : t('transport_order.navigation.submit_order') }}
      </button>
    </div>
  </div>
</div>