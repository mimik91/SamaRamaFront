<div class="images-container">
  <h2>Zarządzaj logo serwisu</h2>
  <p class="description">Dodaj logo swojego serwisu, które będzie widoczne w wynikach wyszukiwania i na stronie profilu.</p>

  <!-- Loading State -->
  <div *ngIf="isLoadingLogo" class="loading-state">
    <div class="spinner"></div>
    <p>Ładowanie loga...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="message error-message">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="15" y1="9" x2="9" y2="15"></line>
      <line x1="9" y1="9" x2="15" y2="15"></line>
    </svg>
    <span>{{ errorMessage }}</span>
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="message success-message">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polyline points="20 6 9 17 4 12"></polyline>
    </svg>
    <span>{{ successMessage }}</span>
  </div>

  <!-- Current Logo -->
  <div *ngIf="!isLoadingLogo && logoUrl" class="current-logo-section">
    <h3>Obecne logo</h3>
    <div class="logo-preview">
      <img [src]="logoUrl" alt="Logo serwisu" class="logo-image">
    </div>
    <button 
      (click)="deleteLogo()" 
      [disabled]="isUploading"
      class="btn btn-danger">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
      </svg>
      Usuń logo
    </button>
  </div>

  <!-- No Logo State -->
  <div *ngIf="!isLoadingLogo && !logoUrl && !selectedFile" class="no-logo-state">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
      <circle cx="8.5" cy="8.5" r="1.5"></circle>
      <polyline points="21 15 16 10 5 21"></polyline>
    </svg>
    <p>Nie masz jeszcze logo</p>
  </div>

  <!-- Upload Section -->
  <div class="upload-section">
    <h3>{{ logoUrl ? 'Zmień logo' : 'Dodaj logo' }}</h3>
    
    <div class="upload-requirements">
      <p><strong>Wymagania:</strong></p>
      <ul>
        <li>Format: JPG, PNG, WEBP lub GIF</li>
        <li>Maksymalny rozmiar: 1 MB</li>
        <li>Zalecane proporcje: kwadratowe (1:1)</li>
      </ul>
    </div>

    <!-- File Input -->
    <div class="file-input-wrapper">
      <input 
        type="file" 
        id="logo-upload"
        accept="image/*"
        (change)="onFileSelected($event)"
        [disabled]="isUploading"
        class="file-input">
      <label for="logo-upload" class="file-input-label" [class.disabled]="isUploading">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="17 8 12 3 7 8"></polyline>
          <line x1="12" y1="3" x2="12" y2="15"></line>
        </svg>
        {{ isUploading ? 'Przesyłanie...' : 'Wybierz plik' }}
      </label>
    </div>

    <!-- Selected File Preview -->
    <div *ngIf="selectedFile" class="selected-file-preview">
      <div class="preview-image-wrapper">
        <img [src]="previewUrl" alt="Podgląd" class="preview-image">
      </div>
      <div class="file-details">
        <p class="file-name">{{ selectedFile.name }}</p>
        <p class="file-size">{{ formatFileSize(selectedFile.size) }}</p>
      </div>
      <div class="upload-actions">
        <button 
          (click)="uploadLogo()" 
          [disabled]="isUploading"
          class="btn btn-primary">
          <svg *ngIf="!isUploading" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          {{ isUploading ? 'Przesyłanie...' : 'Prześlij logo' }}
        </button>
        <button 
          (click)="clearSelection()" 
          [disabled]="isUploading"
          class="btn btn-secondary">
          Anuluj
        </button>
      </div>

      <!-- Upload Progress -->
      <div *ngIf="isUploading" class="progress-bar-wrapper">
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="uploadProgress"></div>
        </div>
        <p class="progress-text">{{ uploadProgress }}%</p>
      </div>
    </div>
  </div>
</div>