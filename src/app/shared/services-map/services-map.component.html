<!-- src/app/shared/services-map/services-map.component.html -->
<div class="map-container">
  <div class="map-header">
    <h3>Serwisy rowerowe w Krakowie</h3>
    <p class="map-description">ZnajdÅº najbliÅ¼szy serwis rowerowy</p>
  </div>
  
  <div #mapContainer class="map-wrapper" id="services-map">
    <!-- Show map button - lazy loading -->
    <div *ngIf="!mapVisible && !loading && !mapError && isBrowser" class="map-placeholder">
      <div class="map-icon">ğŸ—ºï¸</div>
      <p>Kliknij aby zaÅ‚adowaÄ‡ mapÄ™</p>
      <button class="show-map-button" (click)="showMap()">PokaÅ¼ mapÄ™ serwisÃ³w</button>
    </div>
    
    <!-- Loading state -->
    <div *ngIf="loading && !mapError" class="map-placeholder">
      <div class="loading-spinner"></div>
      <p>Åadowanie mapy...</p>
    </div>
    
    <!-- Error state -->
    <div *ngIf="mapError" class="map-placeholder error-state">
      <div class="error-icon">âš ï¸</div>
      <p>Nie udaÅ‚o siÄ™ zaÅ‚adowaÄ‡ mapy</p>
      <button class="retry-button" (click)="retryMapLoad()">SprÃ³buj ponownie</button>
    </div>
    
    <!-- Fallback for non-browser environment -->
    <div *ngIf="!isBrowser" class="map-placeholder">
      <p>Mapa bÄ™dzie dostÄ™pna po zaÅ‚adowaniu strony w przeglÄ…darce</p>
    </div>
  </div>
  
  <div class="map-info" *ngIf="pins.length > 0 || (!loading && !mapError)">
    <p class="services-count" *ngIf="pins.length > 0">
      <strong>{{ pins.length }}</strong> {{ pins.length === 1 ? 'serwis' : 'serwisÃ³w' }} w okolicy
    </p>
    <p class="services-count" *ngIf="pins.length === 0 && !loading">
      SprawdÅº dostÄ™pne serwisy na mapie
    </p>
  </div>
</div>