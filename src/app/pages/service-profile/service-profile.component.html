<div class="profile-container">
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>{{ t('service_profile.loading') }}</p>
  </div>

  <div *ngIf="error && !isLoading" class="error-container">
    <div class="error-icon">⚠️</div>
    <h2>{{ error }}</h2>
    <p>{{ t('service_profile.errors.check_url') }}</p>
    <button class="btn-primary" [routerLink]="['/']">
      {{ t('service_profile.home_button') }}
    </button>
  </div>

  <div *ngIf="!isLoading && !error && publicInfo" class="profile-content">
    
    <nav class="navigation">
      <ul class="nav-links">
        <li>
          <a [routerLink]="['/', suffix]"
             routerLinkActive="active"
             [routerLinkActiveOptions]="{exact: true}">
            {{ t('service_profile.tabs.about_us') }}
          </a>
        </li>

        <li *ngIf="activeStatus?.pricelistActive">
          <a [routerLink]="['/', suffix, 'cennik']"
             routerLinkActive="active"
             [routerLinkActiveOptions]="{exact: true}">
            {{ t('service_profile.tabs.pricelist') }}
          </a>
        </li>

        <li *ngIf="activeStatus?.openingHoursActive">
          <a [routerLink]="['/', suffix, 'godziny-otwarcia']"
             routerLinkActive="active"
             [routerLinkActiveOptions]="{exact: true}">
            {{ t('service_profile.tabs.opening_hours') }}
          </a>
        </li>
      </ul>
    </nav>

    <!-- ABOUT US TAB -->
    <section class="main-content" id="info" *ngIf="activeTab === 'info'">
      <div class="content-left">
        <h1>{{ publicInfo.name }} – serwis rowerowy {{ publicInfo.city }}</h1>
        <!-- Logo z skeleton -->
        <div class="logo-container">
          <div *ngIf="!logoUrl" class="skeleton skeleton-logo"></div>
          <img
            *ngIf="logoUrl"
            [src]="logoUrl"
            [alt]="publicInfo.name"
            class="service-logo fade-in">
        </div>
        <h2>O serwisie</h2>
        <p class="service-location">{{ publicInfo.city }}</p>
        <p *ngIf="publicInfo.description">{{ publicInfo.description }}</p>
        
        <div 
          class="transport-card" 
          *ngIf="publicInfo.transportAvailable"
          [style.background-image]="'url(assets/images/pictures/rowerem-w-gory.webp)'">
          <div class="transport-overlay"></div>
          <div class="transport-content">
            <p class="transport-subtitle">
              {{ t('service_profile.transport.subtitle') }}
            </p>
            <button
              class="btn-transport"
              [routerLink]="['/order-transport', suffix]">
              {{ t('service_profile.transport.button') }}
            </button>
          </div>
        </div>
      </div>
      
      <div class="content-right">
        <!-- About Us image z skeleton -->
        <div *ngIf="!aboutUsImageUrl" class="skeleton skeleton-content-image"></div>
        <img
          *ngIf="aboutUsImageUrl"
          [src]="aboutUsImageUrl"
          [alt]="t('service_profile.images.about_us')"
          class="content-image fade-in">
      </div>
    </section>

    <!-- PRICELIST TAB (z pakietami na górze) -->
<section class="pricelist-section" *ngIf="activeTab === 'pricelist'">
  <div class="pricelist-tab">
    
    <!-- ============================================ -->
    <!-- PAKIETY SERWISOWE - NA GÓRZE CENNIKA -->
    <!-- ============================================ -->
    <div *ngIf="packagesConfig && packages && packages.length > 0" class="packages-section-in-pricelist">
      
      <!-- Nagłówek sekcji pakietów -->
      <h2 class="section-title">Pakiety serwisowe</h2>
      
      <!-- General Description -->
      <div *ngIf="packagesConfig.generalDescription" class="info-banner">
        <p>{{ packagesConfig.generalDescription }}</p>
      </div>

      <!-- Bike Type Selector -->
      <div class="bike-type-selector" *ngIf="bikeTypes && bikeTypes.length > 0">
        <label for="bikeTypeSelect">Wybierz typ roweru:</label>
        <select 
          id="bikeTypeSelect" 
          class="bike-type-dropdown"
          [ngModel]="selectedBikeType" 
          (ngModelChange)="onBikeTypeChange($event)">
          <option *ngFor="let type of bikeTypes" [value]="type">
            {{ type }}
          </option>
        </select>
      </div>

      <!-- Packages Display -->
      <div class="packages-container" *ngIf="selectedBikeType">
        <div 
          *ngFor="let level of packageLevels" 
          class="package-card"
          [class.no-package]="!getPackageForLevel(level)">
          
          <div *ngIf="getPackageForLevel(level); let pkg" class="package-content">
            <div class="package-header">
              <h3 class="package-title">{{ getPackageDisplayName(pkg) }}</h3>
            </div>
            
            <div class="package-description" *ngIf="pkg.description">
              <p>{{ pkg.description }}</p>
            </div>
            
            <div class="package-price">
              <span class="price-amount">{{ pkg.price }}</span>
              <span class="price-currency">zł</span>
            </div>
          </div>

          <div *ngIf="!getPackageForLevel(level)" class="no-package-content">
            <p>Brak pakietu dla tego typu roweru</p>
          </div>
        </div>
      </div>

      <!-- Comment -->
      <div *ngIf="packagesConfig.comment" class="note-banner">
        <p><strong>Uwaga:</strong> {{ packagesConfig.comment }}</p>
      </div>

      <!-- Separator między pakietami a cennikiem -->
      <div class="section-separator"></div>
    </div>

    <!-- ============================================ -->
    <!-- CENNIK USŁUG - PONIŻEJ PAKIETÓW -->
    <!-- ============================================ -->
    <div *ngIf="pricelist">
      <!-- Nagłówek sekcji cennika -->
      <h2 class="section-title" *ngIf="packages && packages.length > 0">Cennik usług</h2>
      
      <div *ngIf="pricelist.pricelistInfo" class="info-banner">
        <p>{{ pricelist.pricelistInfo }}</p>
      </div>
      
      <div *ngFor="let categoryGroup of getPricelistByCategories()" class="category-group">
        <h3 class="category-title">{{ categoryGroup.category }}</h3>
        <div class="pricelist-items">
          <div *ngFor="let item of categoryGroup.items" class="price-item">
            <span class="item-name">{{ item.name }}</span>
            <span class="item-price">{{ item.price }} zł</span>
          </div>
        </div>
      </div>
      
      <div *ngIf="pricelist.pricelistNote" class="note-banner">
        <p><strong>Uwaga:</strong> {{ pricelist.pricelistNote }}</p>
      </div>
    </div>
  </div>
</section>

    <!-- OPENING HOURS TAB -->
    <section class="main-content" *ngIf="activeTab === 'hours'">
      <div class="content-left">
        <h2>Godziny otwarcia – {{ publicInfo.name }}</h2>
        <div *ngIf="openingHours?.openingHoursInfo" class="info-banner">
          <p>{{ openingHours?.openingHoursInfo }}</p>
        </div>
        
        <div class="hours-list">
          <div *ngFor="let day of daysOfWeek" class="day-row">
            <span class="day-name">{{ day.label }}</span>
            <span class="day-hours" *ngIf="getDayInterval(day.key)">
              {{ getDayInterval(day.key)!.openTime }} - {{ getDayInterval(day.key)!.closeTime }}
            </span>
            <span class="day-hours closed" *ngIf="!getDayInterval(day.key)">
              {{ t('service_profile.hours.closed') }}
            </span>
          </div>
        </div>
        
        <div *ngIf="openingHours?.openingHoursNote" class="note-banner">
          <p><strong>{{ t('common.note') }}:</strong> {{ openingHours?.openingHoursNote }}</p>
        </div>
      </div>
      
      <div class="content-right">
        <!-- Opening Hours image z skeleton -->
        <div *ngIf="!openingHoursImageUrl" class="skeleton skeleton-content-image"></div>
        <img
          *ngIf="openingHoursImageUrl"
          [src]="openingHoursImageUrl"
          [alt]="t('service_profile.images.opening_hours')"
          class="content-image fade-in">
      </div>
    </section>

    <!-- CONTACT SECTION -->
    <section class="contact-section" id="contact">
      <h2 class="contact-heading">Kontakt – {{ publicInfo.name }}</h2>
      <div class="contact-wrapper">
        <div class="left-col">
          <div class="row" *ngIf="publicInfo.street">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 9.5c-1.38 
              0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
            <span>{{ publicInfo.street }} {{ publicInfo.building }}<span *ngIf="publicInfo.flat">/{{ publicInfo.flat }}</span></span>
          </div>
          
          <div class="row" *ngIf="publicInfo.postalCode && publicInfo.city">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 9.5c-1.38 
              0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
            <span>{{ publicInfo.postalCode }} {{ publicInfo.city }}</span>
          </div>

          <div class="row" *ngIf="publicInfo.email">
            <svg class="icon" viewBox="0 0 24 24">
              <path fill="currentColor" d="M2 4h20v16H2V4zm2 2v.01L12 13l8-6.99V6H4zm0 12h16V8l-8 7-8-7v10z"/>
            </svg>
            <a [href]="'mailto:' + publicInfo.email">{{ publicInfo.email }}</a>
          </div>
          
          <div class="row" *ngIf="publicInfo.phoneNumber">
            <svg class="icon" viewBox="0 0 24 24">
              <path d="M6.6 10.8a15.5 15.5 0 0 0 6.6 6.6l2.2-2.2c.3-.3.8-.4 1.2-.3 
              1.3.4 2.7.7 4.1.7.7 0 1.3.6 1.3 1.3V21c0 .7-.6 1.3-1.3 1.3A19.3 
              19.3 0 0 1 3 4.3C3 3.6 3.6 3 4.3 3H7c.7 0 1.3.6 1.3 1.3 0 1.4.3 2.8.7 
              4.1.1.4 0 .9-.4 1.2l-2 2.2z"/>
            </svg>
            <a [href]="'tel:' + publicInfo.phoneNumber" class="contact-phone">
              {{ publicInfo.phoneNumber }}
            </a>
          </div>
        </div>

        <div class="right-col">
          <div class="icons-row" *ngIf="hasSocialMedia()">
            <a *ngIf="publicInfo.website" [href]="getWebsiteUrl(publicInfo.website)" target="_blank" rel="noopener noreferrer">
              <svg width="28" height="28" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="60" cy="60" r="50" stroke="currentColor" stroke-width="3"/>
                 <path d="M60 10 C40 10 30 35 30 60 C30 85 40 110 60 110" stroke="currentColor" stroke-width="3" fill="none"/>
                 <path d="M60 10 C80 10 90 35 90 60 C90 85 80 110 60 110" stroke="currentColor" stroke-width="3" fill="none"/>
                 <line x1="60" y1="10" x2="60" y2="110" stroke="currentColor" stroke-width="3"/>
                 <line x1="17" y1="35" x2="103" y2="35" stroke="currentColor" stroke-width="3"/>
                 <line x1="10" y1="60" x2="110" y2="60" stroke="currentColor" stroke-width="3"/>
                 <line x1="17" y1="85" x2="103" y2="85" stroke="currentColor" stroke-width="3"/>
              </svg>
              <span>{{ t('service_profile.contact.website') }}</span>
            </a>
            
            <a *ngIf="publicInfo.facebook" [href]="publicInfo.facebook" target="_blank" rel="noopener noreferrer">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 500 500" width="28" height="28">
                <path d="m500,250C500,111.93,388.07,0,250,0S0,111.93,0,250c0,117.24,80.72,215.62,189.61,242.64v-166.24h-51.55v-76.4h51.55v-32.92c0-85.09,38.51-124.53,122.05-124.53,15.84,0,43.17,3.11,54.35,6.21v69.25c-5.9-.62-16.15-.93-28.88-.93-40.99,0-56.83,15.53-56.83,55.9v27.02h81.66l-14.03,76.4h-67.63v171.77c123.77-14.95,219.7-120.35,219.7-248.17Z" fill="currentColor"/>
              </svg>
              <span>FACEBOOK</span>
            </a>
            
            <a *ngIf="publicInfo.instagram" [href]="publicInfo.instagram" target="_blank" rel="noopener noreferrer">
              <svg fill="currentColor" viewBox="0 0 169.063 169.063" width="28" height="28" xmlns="http://www.w3.org/2000/svg">
                <path d="M122.406,0H46.654C20.929,0,0,20.93,0,46.655v75.752c0,25.726,20.929,46.655,46.654,46.655h75.752c25.727,0,46.656-20.93,46.656-46.655V46.655C169.063,20.93,148.133,0,122.406,0z M154.063,122.407c0,17.455-14.201,31.655-31.656,31.655H46.654C29.2,154.063,15,139.862,15,122.407V46.655C15,29.201,29.2,15,46.654,15h75.752c17.455,0,31.656,14.201,31.656,31.655V122.407z"/>
                <path d="M84.531,40.97c-24.021,0-43.563,19.542-43.563,43.563c0,24.02,19.542,43.561,43.563,43.561s43.563-19.541,43.563-43.561C128.094,60.512,108.552,40.97,84.531,40.97z M84.531,113.093c-15.749,0-28.563-12.812-28.563-28.561c0-15.75,12.813-28.563,28.563-28.563s28.563,12.813,28.563,28.563C113.094,100.281,100.28,113.093,84.531,113.093z"/>
                <path d="M129.921,28.251c-2.89,0-5.729,1.17-7.77,3.22c-2.051,2.04-3.23,4.88-3.23,7.78c0,2.891,1.18,5.73,3.23,7.78c2.04,2.04,4.88,3.22,7.77,3.22c2.9,0,5.73-1.18,7.78-3.22c2.05-2.05,3.22-4.89,3.22-7.78c0-2.9-1.17-5.74-3.22-7.78C135.661,29.421,132.821,28.251,129.921,28.251z"/>
              </svg>
              <span>INSTAGRAM</span>
            </a>
            
            <a *ngIf="publicInfo.tiktok" [href]="publicInfo.tiktok" target="_blank" rel="noopener noreferrer">
               <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="28" height="28" fill="currentColor">
                <path d="M16.656 1.029c1.637-0.025 3.262-0.012 4.886-0.025 0.054 2.031 0.878 3.859 2.189 5.213c1.411 1.271 3.247 2.095 5.271 2.235v5.036c-1.912-0.048-3.71-0.489-5.331-1.247c-0.784-0.377-1.447-0.764-2.077-1.196c-0.012 3.649 0.012 7.298-0.025 10.934c-0.103 1.853-0.719 3.543-1.707 4.954c-1.652 2.366-4.328 3.919-7.371 4.011c-0.123 0.006-0.268 0.009-0.414 0.009-1.73 0-3.347-0.482-4.725-1.319c-2.508-1.509-4.238-4.091-4.558-7.094c-0.025-0.625-0.037-1.25-0.012-1.862 0.49-4.779 4.494-8.476 9.361-8.476 0.547 0 1.083 0.047 1.604 0.136c0.025 1.849-0.050 3.699-0.050 5.548-0.423-0.153-0.911-0.242-1.42-0.242-1.868 0-3.457 1.194-4.045 2.861c-0.133 0.427-0.21 0.918-0.21 1.426 0 0.206 0.013 0.41 0.037 0.61c0.332 2.046 2.086 3.59 4.201 3.59 0.061 0 0.121-0.001 0.181-0.004c1.463-0.044 2.733-0.831 3.451-1.994c0.267-0.372 0.45-0.822 0.511-1.311c0.125-2.237 0.075-4.461 0.087-6.698 0.012-5.036-0.012-10.060 0.025-15.083z"/>
              </svg>
              <span>TIKTOK</span>
            </a>
            
            <a *ngIf="publicInfo.youtube" [href]="publicInfo.youtube" target="_blank" rel="noopener noreferrer">
               <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.57 20" width="28" height="20">
                <defs>
                  <mask id="cutout">
                    <rect width="100%" height="100%" fill="white"/>
                    <path d="M11.4 14.3 L18.85 10 L11.4 5.7 Z" fill="black"/>
                  </mask>
                </defs>
                <path d="M27.97 3.12C27.64 1.89 26.68 0.93 25.45 0.6C23.22 0 14.28 0 14.28 0C14.28 0 5.35 0 3.12 0.6C1.89 0.93 0.93 1.89 0.6 3.12C0 5.35 0 10 0 10C0 10 0 14.65 0.6 16.88C0.93 18.11 1.89 19.07 3.12 19.4C5.35 20 14.28 20 14.28 20C14.28 20 23.22 20 25.45 19.4C26.68 19.07 27.64 18.11 27.97 16.88C28.57 14.65 28.57 10 28.57 10C28.57 10 28.57 5.35 27.97 3.12Z" fill="currentColor" mask="url(#cutout)"/>
              </svg>
              <span>YOUTUBE</span>
            </a>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>