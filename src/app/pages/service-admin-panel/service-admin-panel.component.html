<div class="admin-panel-container">
  <div *ngIf="isLoadingServices" class="loading-state">
    <div class="spinner"></div>
    <p>Ładowanie listy serwisów...</p>
  </div>

  <div *ngIf="servicesError" class="error-state">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="15" y1="9" x2="9" y2="15"></line>
      <line x1="9" y1="9" x2="15" y2="15"></line>
    </svg>
    <h2>Błąd ładowania</h2>
    <p>{{ servicesError }}</p>
    <button (click)="loadMyServices()" class="retry-btn">Spróbuj ponownie</button>
  </div>

  <div *ngIf="!isLoadingServices && !servicesError && myServices.length > 0">
    <!-- Service Selector -->
    <div class="service-selector" *ngIf="myServices.length > 1">
      <label for="service-select">Wybierz serwis:</label>
      <select
        id="service-select"
        [value]="selectedServiceId"
        (change)="onServiceChange($event)"
        class="service-dropdown">
        <option *ngFor="let service of myServices" [value]="service.id">
          {{ service.name }}
        </option>
      </select>
    </div>

    <!-- Service Details -->
    <div *ngIf="isLoadingDetails" class="loading-state">
      <div class="spinner"></div>
      <p>Ładowanie danych serwisu...</p>
    </div>

    <div *ngIf="detailsError" class="error-state">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="15" y1="9" x2="9" y2="15"></line>
        <line x1="9" y1="9" x2="15" y2="15"></line>
      </svg>
      <h2>Błąd ładowania</h2>
      <p>{{ detailsError }}</p>
      <button (click)="loadServiceDetails()" class="retry-btn">Spróbuj ponownie</button>
    </div>

    <div *ngIf="!isLoadingDetails && !detailsError && serviceDetails" class="panel-content">
      <header class="panel-header">
        <h1>Panel Administracyjny Serwisu</h1>
        <p class="service-name">{{ serviceDetails.name }}</p>
      </header>

      <!-- Tabs Navigation -->
      <div class="tabs-container">
        <button
          [class.active]="activeTab === 'basic'"
          (click)="setActiveTab('basic')"
          class="tab-btn">
          podstawowe informacje
        </button>
        <button
          [class.active]="activeTab === 'services'"
          (click)="setActiveTab('services')"
          class="tab-btn">
          dostępne usługi
        </button>
        <button
          [class.active]="activeTab === 'pricelist'"
          (click)="setActiveTab('pricelist')"
          class="tab-btn">
          zarządzaj cennikiem
        </button>
        <button
          [class.active]="activeTab === 'hours'"
          (click)="setActiveTab('hours')"
          class="tab-btn">
          godziny otwarcia
        </button>
        <button
          [class.active]="activeTab === 'images'"
          (click)="setActiveTab('images')"
          class="tab-btn">
          zarządzaj zdjęciami
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        <!-- Basic Info Tab -->
        <app-service-admin-basic-info
          *ngIf="activeTab === 'basic'"
          [serviceDetails]="serviceDetails"
          [serviceId]="selectedServiceId!">
        </app-service-admin-basic-info>

        <!-- Services/Coverages Tab -->
        <app-service-admin-coverages
          *ngIf="activeTab === 'services'"
          [serviceId]="selectedServiceId!">
        </app-service-admin-coverages>

        <!-- Pricelist Tab -->
        <app-service-admin-pricelist
          *ngIf="activeTab === 'pricelist'"
          [serviceId]="selectedServiceId!">
        </app-service-admin-pricelist>

        <!-- Opening Hours Tab -->
        <app-service-admin-opening-hours
          *ngIf="activeTab === 'hours'"
          [serviceId]="selectedServiceId!">
        </app-service-admin-opening-hours>

        <!-- Images Tab -->
        <app-service-admin-images
          *ngIf="activeTab === 'images'"
          [serviceId]="selectedServiceId!">
        </app-service-admin-images>
      </div>
    </div>
  </div>
</div>