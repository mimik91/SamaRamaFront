<!-- src/app/pages/services-map-page/components/services-list/services-list.component.html -->

<div class="services-list-container">
  <!-- Header with results info -->
  <div class="results-info" *ngIf="services.length > 0 || (!loading && !error)">
    <p class="results-count">
      <strong>{{ totalServices }}</strong> {{ totalServices === 1 ? 'serwis' : 'serwis√≥w' }} ‚Ä¢ Strona {{ currentPage + 1 }}/{{ totalPages }}
    </p>
  </div>

  <!-- Services list with scroll -->
  <div class="services-list" (scroll)="onScroll($event)">
    <!-- Initial loading state -->
    <div *ngIf="loading && services.length === 0" class="service-item">
      <div class="loading-container">
        <div class="loading-spinner"></div>
        <p>≈Åadowanie serwis√≥w...</p>
      </div>
    </div>

    <!-- Error state -->
    <div *ngIf="error" class="service-item error-state">
      <div class="error-container">
        <div class="error-icon">‚ö†Ô∏è</div>
        <p>Nie uda≈Ço siƒô za≈Çadowaƒá serwis√≥w</p>
        <button class="retry-button" (click)="onRetry()">Spr√≥buj ponownie</button>
      </div>
    </div>

    <!-- Service items -->
    <div 
      *ngFor="let service of services; trackBy: trackByServiceId"
      class="service-item"
      [class.selected]="selectedServiceId === service.id"
      (click)="onServiceClick(service)"
    >
      <!-- Service Logo -->
      <div class="service-logo-container">
        <img 
          [src]="getServiceLogo(service)" 
          [alt]="service.name + ' logo'"
          [attr.data-service-id]="service.id"
          class="service-logo"
          loading="lazy"
          (error)="onImageError($event)"
        />
      </div>

      <div class="service-header">
        <h3 class="service-name">{{ service.name }}</h3>
      </div>

      <div class="service-address" *ngIf="buildAddress(service)">
        <span>üìç</span>
        <span>{{ buildAddress(service) }}</span>
      </div>

      <div class="service-phone" *ngIf="service.phoneNumber">
        <span>üìû</span>
        <a href="tel:{{ service.phoneNumber }}">{{ service.phoneNumber }}</a>
      </div>

      <div class="service-actions">
        <button
          class="service-action-btn primary"
          (click)="onViewDetails(service, $event)"
          *ngIf="isVerified(service)"
        >
          Zobacz szczeg√≥≈Çy
        </button>
      </div>
    </div>

    <!-- Empty state -->
    <div *ngIf="services.length === 0 && !loading && !error" class="service-item">
      <div class="empty-container">
        <div class="empty-icon">üîç</div>
        <p>Nie znaleziono serwis√≥w dla podanych kryteri√≥w</p>
      </div>
    </div>

    <!-- Loading more indicator -->
    <div *ngIf="loadingMore && services.length > 0" class="loading-more">
      <div class="loading-spinner"></div>
      <p>≈Åadowanie kolejnych serwis√≥w...</p>
    </div>
  </div>
</div>